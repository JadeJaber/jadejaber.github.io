---
published: true
layout: post
excerpt: Nifi API
categories: articles
tags:
  - nifi
comments: true
share: true
---
Source : https://nifi.apache.org/docs/nifi-docs/rest-api/ 

## Get A token 

```shell
/root/curl/bin/curl -u admin:#####  -k -i  -d "username=admin&password=#####" -X  POST https://[hostname]:9091/nifi-api/access/token 
```

	Le token est ensuite utilisé pour les prochains appels 
Demander des infos du cluster (liste/id des nœuds) 
/root/curl/bin/curl -k -i -X GET https://inbdfte03.rouen.francetelecom.fr:9091/nifi-api/controller/cluster -H 'Authorization: Bearer TOKEN'

Récupérer des infos d’un  processor group (ici root)
/root/curl/bin/curl -k -i -X GET https://inbdfte03.rouen.francetelecom.fr:9091/nifi-api/process-groups/root  -H 'Authorization: Bearer TOKEN'

Récupérer les process groupes enfant d’un process group 
/root/curl/bin/curl -k -i -X GET https://inbdfte03.rouen.francetelecom.fr:9091/nifi-api/process-groups/root/process-groups -H 'Authorization: Bearer TOKEN'

Lister les processors qui tournent sur un node
/root/curl/bin/curl -k -i -X GET https://inbdfte03.rouen.francetelecom.fr:9091/nifi-api/process-groups/7c84501d-d10c-407c-b9f3-1d80e38fe36a/processors -H 'Authorization: Bearer TOKEN'

Arrêter un coprocessor 
/root/curl/bin/curl -k -i -H "Content-Type: application/json" -H 'Authorization: Bearer TOKEN'  -d '{"revision":{"clientId":"jade","version":"4"},"component":{"id":"87dcf945-0159-1000-ffff-ffffd9f4c984","state":"STOPPED"}}' -X PUT https://inbdfte03.rouen.francetelecom.fr:9091/nifi-api/processors/87dcf945-0159-1000-ffff-ffffd9f4c984

Supprimer un  nœud (et pas le déconnecter, nuance…)
/root/curl/bin/curl -k -i -X DELETE https://inbdfte03.rouen.francetelecom.fr:9091/nifi-api/controller/cluster/nodes/9116d192-184e-4538-9986-0dc68a04c119 -H 'Authorization: Bearer TOKEN'

Pour injecter des données dans un HandleHttpRequest
curl -v -X POST -k -d "coucou" http://inbdfte02.rouen.francetelecom.fr:3000  --header "Content-Type:text/xml"
Récupérer tous les groups
/root/curl/bin/curl -k -i -X DELETE https://inbdfte03.rouen.francetelecom.fr:9091/nifi-api/tenants/user-groups -H 'Authorization: Bearer TOKEN'
