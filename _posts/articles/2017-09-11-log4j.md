---
published: true
layout: post
excerpt: description
categories: articles
share: true
tags:
  - java
  - cheat sheet
  - log4j
---
## 1. Appendix 
- **LoggerContext** : The LoggerContext acts as the anchor point for the Logging system
- **Configuration** : Every LoggerContext has an active Configuration. The Configuration contains all the Appenders, context-wide Filters, LoggerConfigs and contains the reference to the StrSubstitutor.
- **Logger** : Created by calling getLogger. A Logger is associated with a LoggerConfig.
- **LoggerConfig** : LoggerConfig objects are created when Loggers are declared in the logging configuration. The LoggerConfig contains a set of Filters that must allow the LogEvent to pass before it will be passed to any Appenders. It contains references to the set of Appenders that should be used to process the event.
- **Log levels** (WARN, INFO...) :  Each Logger references the appropriate LoggerConfig which in turn can reference its parent.


## 2. Architecture 
![Log4jClasses.jpg]({{site.baseurl}}/images/Log4jClasses.jpg)

1.**Log Manager** locates the appropriate **Logger context** and obtains the Logger 
2. The **Logger** is associated with the **LoggerConfig**  that contains :
 * the same name as the Logger, 
 * the name of a parent package, or 
 * the root LoggerConfig
 
** Example** : in 
 ```java
package mypackage;
import org.apache.log4j.Logger;
public class Leloggerbis {
    static final Logger logger = Logger.getLogger(Leloggerbis.class.getName());
...
```
The logger will be associated with this LoggerConfig since they have the same name (mypackage.Leloggerbis)
```shell
log4j.logger.mypackage.Leloggerbis=ERROR, stdout
``` 
 
3. The **LoggerConfig** is associatde with the **Appenders** that delivers the LogEvents. LoggerConfigs are hierarchical. The root LoggerConfig resides at the top of the LoggerConfig hierarchy. 
To get the Logger linked to the root LoggerConfig: 
```java
Logger logger = LogManager.getLogger(LogManager.ROOT_LOGGER_NAME);
OR
Logger logger = LogManager.getRootLogger();
```
Otherwise 
```java
Logger.getLogger([myClass].class.getName());
OR
Logger.getLogger(); # By default, Logger will be named with the Class name.
```

## 3. Configuration
### 3.1 Additivity
In order to avoid logging multiple time due to the hierarchy of LoggerConfigs, you may set to false the "additivity" parameter of your logger
```shell
log4j.additivity.logger.Leloggerbis = false
```

## 4. Practice with "Hello world"

### 1. Add the dependency to your POM
```xml
    <dependencies>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.17</version>
    </dependency>
    </dependencies>
```

### 2. Create your log4j.properties file into your resource folder
```shell
# Root logger option
log4j.rootLogger=ERROR, stdout
log4j.logger.mypackage.Leloggerbis=ERROR, stdout
log4j.additivity.mypackage.Leloggerbis = false


# Direct log messages to stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n
```

### 3. Import log4J package into your class and Add a static object to your class
```java
package mypackage;
import org.apache.log4j.Logger;
public class Leloggerbis {
    static final Logger logger = Logger.getLogger(Leloggerbis.class.getName());

    public static void main(String [ ] args)
    {
        // BasicConfigurator.configure();
        logger.error("Hello World!");
    }
}
```





